{
  "type": "object",
  "properties": {
    "version": {
      "const": "v1",
      "type": "string"
    },
    "packagingDefinition": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "PrebuiltDockerImage"
            },
            "dockerImage": {
              "type": "string"
            }
          },
          "required": [
            "dockerImage",
            "type"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "ManagedDockerBuild"
            }
          },
          "required": [
            "type"
          ]
        }
      ]
    },
    "nativeToolchainDefinition": {
      "type": "object",
      "properties": {
        "commands": {
          "type": "object",
          "properties": {
            "start": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "const": "Dockerized"
                    },
                    "dockerImage": {
                      "type": "string"
                    },
                    "commandArgs": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "commandArgs",
                    "dockerImage",
                    "type"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "const": "ShellScript"
                    },
                    "bash": {
                      "type": "string"
                    },
                    "powershell": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "bash",
                    "powershell",
                    "type"
                  ]
                },
                {
                  "type": "string"
                }
              ]
            },
            "update": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "const": "Dockerized"
                    },
                    "dockerImage": {
                      "type": "string"
                    },
                    "commandArgs": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "commandArgs",
                    "dockerImage",
                    "type"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "const": "ShellScript"
                    },
                    "bash": {
                      "type": "string"
                    },
                    "powershell": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "bash",
                    "powershell",
                    "type"
                  ]
                },
                {
                  "type": "string"
                }
              ]
            },
            "watch": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "const": "Dockerized"
                    },
                    "dockerImage": {
                      "type": "string"
                    },
                    "commandArgs": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  "required": [
                    "commandArgs",
                    "dockerImage",
                    "type"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "const": "ShellScript"
                    },
                    "bash": {
                      "type": "string"
                    },
                    "powershell": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "bash",
                    "powershell",
                    "type"
                  ]
                },
                {
                  "type": "string"
                }
              ]
            }
          },
          "required": [
            "start",
            "watch"
          ]
        }
      },
      "required": [
        "commands"
      ]
    },
    "supportedEnvironmentVariables": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "defaultValue": {
            "type": "string"
          },
          "required": {
            "type": "string"
          }
        },
        "required": [
          "description",
          "name"
        ]
      }
    },
    "commands": {
      "type": "object",
      "properties": {
        "update": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "Dockerized"
                },
                "dockerImage": {
                  "type": "string"
                },
                "commandArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "commandArgs",
                "dockerImage",
                "type"
              ]
            },
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "ShellScript"
                },
                "bash": {
                  "type": "string"
                },
                "powershell": {
                  "type": "string"
                }
              },
              "required": [
                "bash",
                "powershell",
                "type"
              ]
            },
            {
              "type": "string"
            }
          ]
        },
        "watch": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "Dockerized"
                },
                "dockerImage": {
                  "type": "string"
                },
                "commandArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "commandArgs",
                "dockerImage",
                "type"
              ]
            },
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "ShellScript"
                },
                "bash": {
                  "type": "string"
                },
                "powershell": {
                  "type": "string"
                }
              },
              "required": [
                "bash",
                "powershell",
                "type"
              ]
            },
            {
              "type": "string"
            }
          ]
        },
        "printSchemaAndCapabilities": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "Dockerized"
                },
                "dockerImage": {
                  "type": "string"
                },
                "commandArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "commandArgs",
                "dockerImage",
                "type"
              ]
            },
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "ShellScript"
                },
                "bash": {
                  "type": "string"
                },
                "powershell": {
                  "type": "string"
                }
              },
              "required": [
                "bash",
                "powershell",
                "type"
              ]
            },
            {
              "type": "string"
            }
          ]
        },
        "upgradeConfiguration": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "Dockerized"
                },
                "dockerImage": {
                  "type": "string"
                },
                "commandArgs": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "commandArgs",
                "dockerImage",
                "type"
              ]
            },
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "const": "ShellScript"
                },
                "bash": {
                  "type": "string"
                },
                "powershell": {
                  "type": "string"
                }
              },
              "required": [
                "bash",
                "powershell",
                "type"
              ]
            },
            {
              "type": "string"
            }
          ]
        }
      }
    },
    "cliPlugin": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "const": "Binary",
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "version": {
              "type": "string"
            }
          },
          "required": [
            "name",
            "version"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "BinaryInline"
            },
            "platforms": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "selector": {
                    "description": "The selector identifies the target platform for this configuration.\nIt follows the format: <os>-<architecture>\n\nPossible values:\n- darwin-arm64: macOS on ARM64 architecture (e.g., M1 Macs)\n- linux-arm64: Linux on ARM64 architecture\n- darwin-amd64: macOS on x86-64 architecture\n- windows-amd64: Windows on x86-64 architecture\n- linux-amd64: Linux on x86-64 architecture",
                    "enum": [
                      "darwin-amd64",
                      "darwin-arm64",
                      "linux-amd64",
                      "linux-arm64",
                      "windows-amd64"
                    ],
                    "type": "string"
                  },
                  "uri": {
                    "description": "The URI of the CLI plugin archive, it can either be in the tar.gz format\nor zip format (for windows).\nThis archive should be a URL from which the binary can be downloaded,\nwithout any authentication.",
                    "type": "string"
                  },
                  "sha256": {
                    "description": "The SHA256 hash of the binary file. This is used to verify the integrity of the downloaded binary.",
                    "type": "string"
                  },
                  "bin": {
                    "description": "The name of the binary file. This is the name of the binary file that will be placed in the bin directory.",
                    "type": "string"
                  }
                },
                "required": [
                  "bin",
                  "selector",
                  "sha256",
                  "uri"
                ]
              }
            }
          },
          "required": [
            "platforms",
            "type"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "Docker"
            },
            "dockerImage": {
              "type": "string"
            }
          },
          "required": [
            "dockerImage",
            "type"
          ]
        }
      ]
    },
    "dockerComposeWatch": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string"
          },
          "action": {
            "enum": [
              "rebuild",
              "sync",
              "sync+restart"
            ],
            "type": "string"
          },
          "target": {
            "type": "string"
          },
          "ignore": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "action",
          "path"
        ]
      }
    },
    "documentationPage": {
      "type": "string"
    }
  },
  "required": [
    "commands",
    "dockerComposeWatch",
    "packagingDefinition",
    "supportedEnvironmentVariables"
  ],
  "$schema": "http://json-schema.org/draft-07/schema#"
}